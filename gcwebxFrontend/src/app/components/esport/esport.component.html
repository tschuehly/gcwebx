<div class="backgroundimg">
  <div class="container-fluid topspace"></div>

  <div *ngIf="game.value != 'teammanagement'" class="container m-auto mt-5 ">
    <div *ngIf="currentTeam"
         class="container-fluid p-2 mt-4 teamselection d-flex flex-column justify-content-end text-light">
      <div class="row">
        <div class="col justify-content-end d-flex">
          <div ngbDropdown class="d-inline-block btn text-light">
              <a class="h1" ngbDropdownToggle id="dropdownTeams">{{currentTeam.teamName | uppercase}}</a>

             <div ngbDropdownMenu aria-labelledby="dropdownTeams">

              <ng-container *ngFor="let team of filteredTeams$ | async">
                <button class="btn-dark" ngbDropdownItem>
                  <a class="" (click)="currentTeam = team"><h5 class="text-dark m-0">{{team.teamName}}</h5></a>
                </button>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>

      <div *ngIf="currentTeam" class="d-flex justify-content-center flex-wrap m-5">
        <table class="table table-dark table-striped">
          <tr>
            <th>Name</th>
            <th>Rolle</th>
            <th>Social Media</th>
          </tr>

          <ng-container *ngFor="let member of currentTeam.members;index as i">
            <tr>
              <td>{{member.name}}</td>
              <td>{{member.generalInfo}}</td>
              <td class=""><a href="{{member.twitter}}" target="_blank"><i style="color: white"
                                                                           class="fab fa-twitter fa-2x mx-2"></i></a><a
                href="{{member.youtube}}" target="_blank"><i style="color: white"
                                                             class="fab fa-youtube fa-2x  mx-2"></i></a></td>
            </tr>
          </ng-container>
        </table>
      </div>

      <div>
        <h1 class="text-primary">LATEST MATCHES</h1>
        <ng-container *ngFor="let match of matches$ | async" >
          <div  *ngIf="match.hometeam.teamId == currentTeam.teamId">
            <h2>{{match.title}}</h2>
          </div>


        </ng-container>
      </div>
    </div>

    <div *ngIf="game.value == 'teammanagement'" class="m-auto text-center ">
      <div class="container">
        <h1 class="text-light">Teamverwaltung</h1>
        <div class="container-fluid mt-2">
          <div class=" pl-2 py-2">
            <div class="col-4 ml-auto">
              <button class="btn btn-outline-light" (click)="createTeam()">Create New Team</button>
            </div>

          </div>
          <table class="table table-dark">
            <tr>
              <th>ID:</th>
              <th>Name</th>
              <th>Game</th>
              <th>Generelle Info</th>
              <th>Member:</th>
            </tr>
            <tr *ngFor="let team of teams$ | async">
              <td>{{team.teamId}}</td>
              <td>
                <button type="button" class="btn btn-outline-light" (click)="editTeam(team)">
                  {{team.teamName}}
                </button>
              </td>
              <td>{{team.game}}</td>
              <td>{{team.generalInfo}}</td>
              <td><h5><span *ngFor="let member of team.members"
                            class="badge badge-light text mx-1">{{member.name}}</span>
              </h5></td>
            </tr>
          </table>
          <div class="">
            <div class="table-responsive">
              <table class="table table-borderless text-light">
                <cdk-virtual-scroll-viewport itemSize='5' class="viewport" minBufferPx="1200" maxBufferPx="1500">
                  <thead class="thead">
                  <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Game</th>
                    <th>Generelle Info</th>
                  </tr>
                  </thead>

                  <tbody>
                  <tr *cdkVirtualFor="let team of teams$ |  async" class="tablerow">
                    <td>{{team.teamId}}</td>
                    <td>
                      <button type="button" class="btn btn-outline-light bt n-block" (click)="editTeam(team)">
                        {{team.teamName}}
                      </button>
                    </td>
                    <td>{{team.game}}</td>
                    <td>{{team.generalInfo}}</td>

                  </tr>


                  </tbody>
                </cdk-virtual-scroll-viewport>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="game.value == 'matchmanagement'" class="container m-auto mt-5">
      <div class="container">
        <h1 class="text-light">Matchverwaltung</h1>
        <div class="container-fluid mt-2">
          <div class=" pl-2 py-2">
            <div class="col-4 ml-auto">
              <button class="btn btn-outline-light" (click)="createMatch()">Create Match</button>
            </div>

          </div>
          <table class="table table-dark">
            <tr>
              <th>ID:</th>
              <th>Name</th>
              <th>Team:</th>
              <th>Gegner:</th>
              <th>Game</th>
              <th>Datum:</th>
              <th>LÃ¶schen:</th>
            </tr>
            <tr *ngFor="let match of matches$ | async">
              <td>{{match.id}}</td>
              <td>{{match.title}}</td>
              <td>{{match.hometeam.teamName}} </td>
              <td>{{match.opponent}}</td>
              <td>{{match.hometeam.game}}</td>
              <td>{{match.date | date :'dd.MM.yy HH:mm'}}</td>
              <td><div class="btn" (click)="deleteMatch(match)">
                <i class="text-light fa fa-trash"></i>
              </div></td>
            </tr>
          </table>
        </div>
      </div>
    </div>

  </div>
